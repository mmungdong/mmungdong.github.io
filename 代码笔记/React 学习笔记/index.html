

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicon.ico">
  <link rel="icon" href="/assets/img/favicon.ico">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Yang Fanbin">
  <meta name="keywords" content="">
  
    <meta name="description" content="1. åˆå§‹åŒ– React é¡¹ç›®1. React è„šæ‰‹æ¶ create-react-app åˆå§‹åŒ–é¡¹ç›®1. node å®‰è£…ä¸‹è½½åœ°å€ï¼šhttps:&#x2F;&#x2F;nodejs.org&#x2F;en&#x2F;download ç‰ˆæœ¬é€‰æ‹©ï¼šæœ€æ–°ç‰ˆå¸¦æœ‰LTSï¼ˆç¨³å®šç‰ˆï¼‰çš„ã€‚  nodeä¸‹è½½å¥½ä¹‹åä¼šè‡ªåŠ¨å¸¦ä¸€ä¸ªnpmçš„åŒ…ç®¡ç†å·¥å…·ã€‚  2. Reactè„šæ‰‹æ¶ create-react-app ä¸‹è½½è„šæ‰‹æ¶  npm ä¸‹è½½reactè„šæ‰‹æ¶ npm">
<meta property="og:type" content="article">
<meta property="og:title" content="React å­¦ä¹ ç¬”è®°">
<meta property="og:url" content="https://yangfanbin.cn/%E4%BB%A3%E7%A0%81%E7%AC%94%E8%AE%B0/React%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="Yang Fanbin">
<meta property="og:description" content="1. åˆå§‹åŒ– React é¡¹ç›®1. React è„šæ‰‹æ¶ create-react-app åˆå§‹åŒ–é¡¹ç›®1. node å®‰è£…ä¸‹è½½åœ°å€ï¼šhttps:&#x2F;&#x2F;nodejs.org&#x2F;en&#x2F;download ç‰ˆæœ¬é€‰æ‹©ï¼šæœ€æ–°ç‰ˆå¸¦æœ‰LTSï¼ˆç¨³å®šç‰ˆï¼‰çš„ã€‚  nodeä¸‹è½½å¥½ä¹‹åä¼šè‡ªåŠ¨å¸¦ä¸€ä¸ªnpmçš„åŒ…ç®¡ç†å·¥å…·ã€‚  2. Reactè„šæ‰‹æ¶ create-react-app ä¸‹è½½è„šæ‰‹æ¶  npm ä¸‹è½½reactè„šæ‰‹æ¶ npm">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802155412382.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802155450481.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802155749281.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802155856043.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802155929953.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802160014826.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802160035630.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802160546687.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802160828040.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802160954820.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802161033090.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802161107628.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802161440462.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802161502753.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802161529169.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802161715426.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802161840774.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802161906731.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802161947474.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802162031720.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802162105619.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802162229762.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802162337980.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802162500799.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802162656554.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802162859283.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802163006211.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802163145744.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802163314731.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802163330667.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802163351806.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802163442294.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802163548963.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802163547853.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802163729208.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802163809368.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802163901155.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802163932163.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802164100120.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802164528890.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802164644764.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802164807534.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802165012910.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802165239253.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802165357084.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802165500725.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802165602536.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802165650009.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802165743166.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802165836696.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802170118844.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802170134236.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802170148798.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802170400839.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802170559574.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802170730881.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802170834648.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802170948807.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802171001997.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802171031792.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802171238980.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802171642428.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802171720058.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802171824222.png">
<meta property="og:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802172008611.png">
<meta property="article:published_time" content="2025-08-07T16:12:50.000Z">
<meta property="article:modified_time" content="2026-01-16T15:47:49.079Z">
<meta property="article:author" content="Yang Fanbin">
<meta property="article:tag" content="react">
<meta property="article:tag" content="å‰ç«¯">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802155412382.png">
  
  
  
  <title>React å­¦ä¹ ç¬”è®° - Yang Fanbin</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"yangfanbin.cn","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"left","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Yang Fanbin</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>é¦–é¡µ</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>åˆ†ç±»</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>æ ‡ç­¾</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/assets/img/top.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="React å­¦ä¹ ç¬”è®°"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-08-08 00:12" pubdate>
          2025å¹´8æœˆ8æ—¥ å‡Œæ™¨
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          7.3k å­—
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          61 åˆ†é’Ÿ
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="padding-left: 2rem; margin-right: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>ç›®å½•</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">React å­¦ä¹ ç¬”è®°</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="1-åˆå§‹åŒ–-React-é¡¹ç›®"><a href="#1-åˆå§‹åŒ–-React-é¡¹ç›®" class="headerlink" title="1. åˆå§‹åŒ– React é¡¹ç›®"></a>1. åˆå§‹åŒ– React é¡¹ç›®</h1><h2 id="1-React-è„šæ‰‹æ¶-create-react-app-åˆå§‹åŒ–é¡¹ç›®"><a href="#1-React-è„šæ‰‹æ¶-create-react-app-åˆå§‹åŒ–é¡¹ç›®" class="headerlink" title="1. React è„šæ‰‹æ¶ create-react-app åˆå§‹åŒ–é¡¹ç›®"></a>1. <strong>React è„šæ‰‹æ¶ create-react-app åˆå§‹åŒ–é¡¹ç›®</strong></h2><h3 id="1-node-å®‰è£…"><a href="#1-node-å®‰è£…" class="headerlink" title="1. node å®‰è£…"></a>1. node å®‰è£…</h3><p>ä¸‹è½½åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://nodejs.org/en/download">https://nodejs.org/en/download</a></p>
<p>ç‰ˆæœ¬é€‰æ‹©ï¼šæœ€æ–°ç‰ˆå¸¦æœ‰LTSï¼ˆç¨³å®šç‰ˆï¼‰çš„ã€‚</p>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802155412382.png" srcset="/img/loading.gif" lazyload></p>
<p>nodeä¸‹è½½å¥½ä¹‹åä¼šè‡ªåŠ¨å¸¦ä¸€ä¸ªnpmçš„åŒ…ç®¡ç†å·¥å…·ã€‚</p>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802155450481.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="2-Reactè„šæ‰‹æ¶-create-react-app"><a href="#2-Reactè„šæ‰‹æ¶-create-react-app" class="headerlink" title="2. Reactè„šæ‰‹æ¶ create-react-app"></a>2. Reactè„šæ‰‹æ¶ create-react-app</h3><ol>
<li><strong>ä¸‹è½½è„šæ‰‹æ¶</strong></li>
</ol>
<p>npm ä¸‹è½½reactè„šæ‰‹æ¶</p>
<p><code>npm install create-react-app -g</code></p>
<p>æŸ¥çœ‹reactè„šæ‰‹æ¶ç‰ˆæœ¬</p>
<p><code>create-react-app --version</code></p>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802155749281.png" srcset="/img/loading.gif" lazyload></p>
<ol>
<li><strong>é€šè¿‡è„šæ‰‹æ¶åˆ›å»ºé¡¹ç›®</strong></li>
</ol>
<p>create-react-app ã€é¡¹ç›®åã€‘ï¼Œé¡¹ç›®åä¸å¯ä»¥åŒ…å«å¤§å†™å­—æ¯</p>
<p>è¿™é‡Œåˆ›å»ºè¿‡æ…¢éœ€è¦è®¾ç½®ä¸‹æ·˜å®æºï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">npm config set registry https://registry.npmmirror.com<br></code></pre></td></tr></table></figure>

<p><code>create-react-app learn_react_scaffold</code></p>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802155856043.png" srcset="/img/loading.gif" lazyload></p>
<ol>
<li><strong>é¡¹ç›®å¯åŠ¨</strong></li>
</ol>
<p>é€šè¿‡è¿è¡Œ<code>npm run start</code>è¿è¡Œé¡¹ç›®ã€‚</p>
<p>react-scripts å‘½ä»¤é›†æˆäº†webpackçš„æ‰“åŒ…æ–¹å¼ã€‚</p>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802155929953.png" srcset="/img/loading.gif" lazyload></p>
<ol>
<li><strong>é¡¹ç›®ç›®å½•ç»“æ„</strong></li>
</ol>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802160014826.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802160035630.png" srcset="/img/loading.gif" lazyload></p>
<h1 id="2-ç»„ä»¶åŒ–å¼€å‘"><a href="#2-ç»„ä»¶åŒ–å¼€å‘" class="headerlink" title="2. ç»„ä»¶åŒ–å¼€å‘"></a>2. ç»„ä»¶åŒ–å¼€å‘</h1><h2 id="1-Reactç»„ä»¶åˆ’åˆ†"><a href="#1-Reactç»„ä»¶åˆ’åˆ†" class="headerlink" title="1. Reactç»„ä»¶åˆ’åˆ†"></a>1. Reactç»„ä»¶åˆ’åˆ†</h2><ul>
<li>æ ¹æ®ç»„ä»¶çš„å®šä¹‰æ–¹å¼ï¼Œåˆ’åˆ†ä¸º<strong>å‡½æ•°ç»„ä»¶</strong>å’Œ<strong>ç±»ç»„ä»¶</strong>ã€‚</li>
<li>æ ¹æ®ç»„ä»¶å†…éƒ¨æ˜¯å¦æœ‰çŠ¶ä½“éœ€è¦ç»´æŠ¤ï¼Œåˆ’åˆ†ä¸º<strong>æ— çŠ¶æ€ç»„ä»¶</strong>å’Œ<strong>æœ‰çŠ¶æ€ç»„ä»¶</strong>ã€‚</li>
<li>æ ¹æ®ç»„ä»¶çš„ä¸åŒèŒè´£ï¼Œåˆ’åˆ†ä¸º<strong>å±•ç¤ºå‹ç»„ä»¶</strong>å’Œ<strong>å®¹å™¨å‹ç»„ä»¶ã€‚</strong></li>
<li><strong>å‡½æ•°ç»„ä»¶ï¼Œæ— çŠ¶æ€ç»„ä»¶å’Œå±•ç¤ºå‹ç»„ä»¶</strong>ä¸»è¦å…³æ³¨uiå±•ç¤ºã€‚</li>
<li><strong>ç±»ç»„ä»¶ï¼Œæœ‰çŠ¶æ€ç»„ä»¶å’Œå®¹å™¨å‹ç»„ä»¶ä¸»è¦å…³æ³¨æ•°æ®é€»è¾‘ã€‚</strong></li>
</ul>
<h2 id="2-ç±»ç»„ä»¶è¦æ±‚"><a href="#2-ç±»ç»„ä»¶è¦æ±‚" class="headerlink" title="2. ç±»ç»„ä»¶è¦æ±‚"></a>2. ç±»ç»„ä»¶è¦æ±‚</h2><ul>
<li><strong>ç»„ä»¶çš„åç§°å¿…é¡»æ˜¯å¤§å†™å­—æ¯å¼€å¤´</strong>ã€‚ï¼ˆæ— è®ºæ˜¯ç±»ç»„ä»¶è¿˜æ˜¯å‡½æ•°å¼ç»„ä»¶ï¼‰</li>
<li>ç±»ç»„ä»¶éœ€è¦ç»§æ‰¿è‡ª <strong>React.Component</strong>ã€‚</li>
<li>ç±»ç»„ä»¶å¿…é¡»å®ç° <strong>render</strong> å‡½æ•°ã€‚</li>
</ul>
<h2 id="3-Helloworldï¼ˆç±»ç»„ä»¶çš„å°è£…ç»†èŠ‚ï¼‰"><a href="#3-Helloworldï¼ˆç±»ç»„ä»¶çš„å°è£…ç»†èŠ‚ï¼‰" class="headerlink" title="3. Helloworldï¼ˆç±»ç»„ä»¶çš„å°è£…ç»†èŠ‚ï¼‰"></a>3. Helloworldï¼ˆç±»ç»„ä»¶çš„å°è£…ç»†èŠ‚ï¼‰</h2><h3 id="1-install"><a href="#1-install" class="headerlink" title="1. install"></a>1. install</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs Shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">åˆ‡æ¢è‡³æ·˜å®æº</span><br>npm config set registry https://registry.npmmirror.com<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">ä½¿ç”¨ create-react-app åˆ›å»º react é¡¹ç›®</span><br>npx create-react-app 03-react-component<br></code></pre></td></tr></table></figure>

<h3 id="2-é¡¹ç›®ç»“æ„"><a href="#2-é¡¹ç›®ç»“æ„" class="headerlink" title="2. é¡¹ç›®ç»“æ„"></a>2. é¡¹ç›®ç»“æ„</h3><p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802160546687.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDom</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-dom/client&quot;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./App&quot;</span><br><br><span class="hljs-comment">// ç¼–å†™reactä»£ç ï¼Œå¹¶è¿›è¡Œæ¸²æŸ“</span><br><span class="hljs-keyword">const</span> root = <span class="hljs-title class_">ReactDom</span>.<span class="hljs-title function_">createRoot</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;root&quot;</span>))<br>root.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>)<br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> react <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">HelloWorld</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./components/HelloWorld&quot;</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">react.Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>React App<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">HelloWorld</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br> &#125;<br><br> <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> react <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloWorld</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">react.Component</span> &#123;<br><br>    <span class="hljs-comment">// æ„é€ æ–¹æ³•</span><br>    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">super</span>()<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>            <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;hello world&quot;</span><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// æ¸²æŸ“</span><br>    <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">const</span> &#123; message &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br><br>        <span class="hljs-keyword">return</span> (<br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;message&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>        )<br>    &#125;<br> &#125;<br><br> <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">HelloWorld</span><br></code></pre></td></tr></table></figure>

<h3 id="3-react-scripts-å‘½ä»¤å¯¹åº”çš„-webpack-é…ç½®"><a href="#3-react-scripts-å‘½ä»¤å¯¹åº”çš„-webpack-é…ç½®" class="headerlink" title="3. react-scripts å‘½ä»¤å¯¹åº”çš„ webpack é…ç½®"></a>3. react-scripts å‘½ä»¤å¯¹åº”çš„ webpack é…ç½®</h3><p>webpacké…ç½®é»˜è®¤éšè—ï¼š</p>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802160828040.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li>å¼¹å‡ºå¯¹åº”é…ç½®ï¼š</li>
</ul>
<p>æ‰§è¡Œ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">npm run eject<br></code></pre></td></tr></table></figure>

<p>å¼¹å‡ºwebpacké…ç½®</p>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802160954820.png" srcset="/img/loading.gif" lazyload></p>
<p>æ–‡ä»¶å˜åŠ¨ï¼š</p>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802161033090.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="4-render-å‡½æ•°çš„è¿”å›å€¼"><a href="#4-render-å‡½æ•°çš„è¿”å›å€¼" class="headerlink" title="4. render å‡½æ•°çš„è¿”å›å€¼"></a>4. render å‡½æ•°çš„è¿”å›å€¼</h3><p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802161107628.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="4-å‡½æ•°å¼ç»„ä»¶çš„å°è£…"><a href="#4-å‡½æ•°å¼ç»„ä»¶çš„å°è£…" class="headerlink" title="4. å‡½æ•°å¼ç»„ä»¶çš„å°è£…"></a>4. <strong>å‡½æ•°å¼ç»„ä»¶çš„å°è£…</strong></h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br><br>    <span class="hljs-comment">// å‡½æ•°å¼ç»„ä»¶å’Œ render çš„è¿”å›å€¼ä¸€æ ·</span><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>React functional App<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="5-ç±»ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#5-ç±»ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="5. ç±»ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ"></a>5. <strong>ç±»ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</strong></h2><blockquote>
<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/reference/react/Component">Component â€“ React ä¸­æ–‡æ–‡æ¡£</a></p>
</blockquote>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802161440462.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802161502753.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802161529169.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="1-å¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸä»£ç ç¤ºä¾‹"><a href="#1-å¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸä»£ç ç¤ºä¾‹" class="headerlink" title="1. å¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸä»£ç ç¤ºä¾‹"></a><strong>1. å¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸä»£ç ç¤ºä¾‹</strong></h3><p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802161715426.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span><br><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">HelloWorld</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./HelloWorld&quot;</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br><br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">super</span>()<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">isShowHW</span>: <span class="hljs-literal">true</span><br>    &#125;<br>  &#125;<br><br>  <span class="hljs-title function_">switchHWShow</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>      <span class="hljs-attr">isShowHW</span>: !<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">isShowHW</span><br>    &#125;)<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123; isShowHW &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>React App<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;e</span> =&gt;</span> this.switchHWShow()&#125;&gt;åˆ‡æ¢<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">        &#123; isShowHW &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">HelloWorld</span> /&gt;</span>&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloWorld</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br><br>    <span class="hljs-comment">// 1. æ„é€ æ–¹æ³•</span><br>    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;hello world constructor ~&quot;</span>)<br><br>        <span class="hljs-variable language_">super</span>()<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>            <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;hello world&quot;</span><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-title function_">changeText</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>            <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;ä½ å¥½ğŸ‘‹ï¼Œæé“¶æ²³ï¼&quot;</span><br>        &#125;)<br>    &#125;<br><br>    <span class="hljs-comment">// 2. æ‰§è¡Œrenderå‡½æ•°</span><br>    <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;hello world render ~&quot;</span>)<br>        <span class="hljs-keyword">const</span> &#123; message &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br><br>        <span class="hljs-keyword">return</span> (<br>            <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>&#123; message &#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;</span> <span class="hljs-attr">e</span> =&gt;</span> this.changeText() &#125;&gt;ç‚¹å‡»ä¿®æ”¹æ–‡æœ¬<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>        )<br>    &#125;<br><br>    <span class="hljs-comment">// 3. ç»„ä»¶è¢«æŒ‚è½½åˆ°DOMä¸­æ—¶ï¼Œä¼šæ‰§è¡Œè¯¥ç”Ÿå‘½å‘¨æœŸå‡½æ•°</span><br>    <span class="hljs-title function_">componentDidMount</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;hello world componentDidMount ~&quot;</span>)<br>    &#125;<br><br>    <span class="hljs-comment">// 4. ç»„ä»¶çš„DOMæ›´æ–°å®Œæˆï¼šDOMå‘ç”Ÿæ›´æ–°</span><br>    <span class="hljs-title function_">componentDidUpdate</span>(<span class="hljs-params">prevProps, prevState, snapshot</span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;hello world componentDidUpdate: &quot;</span>, prevProps, prevState, snapshot)<br>    &#125;<br><br>    <span class="hljs-comment">// 5. ç»„ä»¶å³å°†ä»DOMä¸­å¸è½½æ—¶ï¼šä»DOMä¸­ç§»é™¤</span><br>    <span class="hljs-title function_">componentWillUnmount</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;hello world componentWillUnmount ~&quot;</span>)<br>    &#125;<br><br>    <span class="hljs-comment">// ä¸å¸¸ç”¨åˆ°çš„ç”Ÿå‘½å‘¨æœŸ</span><br>    <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦éœ€è¦é‡æ–°æ¸²æŸ“ç•Œé¢ï¼ˆæ˜¯å¦éœ€è¦é‡æ–°æ‰§è¡Œrenderå‡½æ•°ï¼‰</span><br>    <span class="hljs-title function_">shouldComponentUpdate</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;hello world shouldComponentUpdate ~&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>    &#125;<br><br>    <span class="hljs-comment">// åœ¨æ›´æ–°å‰ä¿å­˜ä¸€äº›æ•°æ®</span><br>    <span class="hljs-title function_">getSnapshotBeforeUpdate</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;hello world getSnapshotBeforeUpdate ~&quot;</span>)<br>        <span class="hljs-keyword">return</span> &#123;<br>            <span class="hljs-attr">scrollPosition</span>: <span class="hljs-number">1000</span>,<br>            <span class="hljs-attr">prevMessage</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">message</span><br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">HelloWorld</span><br></code></pre></td></tr></table></figure>

<p>åˆæ¬¡é¡µé¢ï¼š</p>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802161840774.png" srcset="/img/loading.gif" lazyload></p>
<p>ç‚¹å‡»ä¿®æ”¹æ–‡æœ¬ï¼š</p>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802161906731.png" srcset="/img/loading.gif" lazyload></p>
<p>ç‚¹å‡»åˆ‡æ¢ï¼š</p>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802161947474.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="2-å¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸè¯¦è§£"><a href="#2-å¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸè¯¦è§£" class="headerlink" title="2. å¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸè¯¦è§£"></a><strong>2. å¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸè¯¦è§£</strong></h3><p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802162031720.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802162105619.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="3-ä¸å¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°"><a href="#3-ä¸å¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°" class="headerlink" title="3. ä¸å¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°"></a><strong>3. ä¸å¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°</strong></h3><p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802162229762.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="6-ç»„ä»¶é€šä¿¡"><a href="#6-ç»„ä»¶é€šä¿¡" class="headerlink" title="6. ç»„ä»¶é€šä¿¡"></a>6. ç»„ä»¶é€šä¿¡</h2><h3 id="1-çˆ¶ä¼ å­"><a href="#1-çˆ¶ä¼ å­" class="headerlink" title="1. çˆ¶ä¼ å­"></a>1. çˆ¶ä¼ å­</h3><ul>
<li>é€šè¿‡propsä¼ é€’æ•°æ®</li>
</ul>
<h3 id="2-çˆ¶ä¼ å­ä»£ç ç¤ºä¾‹"><a href="#2-çˆ¶ä¼ å­ä»£ç ç¤ºä¾‹" class="headerlink" title="2. çˆ¶ä¼ å­ä»£ç ç¤ºä¾‹"></a>2. çˆ¶ä¼ å­ä»£ç ç¤ºä¾‹</h3><p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802162337980.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Father</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./c-cpns/Father&#x27;</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Father</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Children</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./Children&#x27;</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Father</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br><br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">super</span>()<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;çˆ¶ç»„ä»¶&#x27;</span>,<br>      <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;æˆ‘æ˜¯çˆ¶ç»„ä»¶çš„æ•°æ®&#x27;</span><br>    &#125;<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123; message, title &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æˆ‘æ˜¯çˆ¶ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Children</span> <span class="hljs-attr">message</span>=<span class="hljs-string">&#123;message&#125;</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&#123;title&#125;</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Father</span><br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Children</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br><br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(props)<br>    <span class="hljs-variable language_">super</span>(props)<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123; message, title &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span><br><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>æˆ‘æ˜¯å­ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>çˆ¶ç»„ä»¶ä¸­çš„tilteï¼š&#123;title&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>çˆ¶ç»„ä»¶ä¸­çš„messageï¼š&#123;message&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Children</span><br></code></pre></td></tr></table></figure>

<p>æ•ˆæœï¼š</p>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802162500799.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="3-ç±»å‹æ ¡éªŒ"><a href="#3-ç±»å‹æ ¡éªŒ" class="headerlink" title="3. ç±»å‹æ ¡éªŒ"></a><strong>3. ç±»å‹æ ¡éªŒ</strong></h3><blockquote>
<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://zh-hans.legacy.reactjs.org/docs/typechecking-with-proptypes.html">ä½¿ç”¨ PropTypes è¿›è¡Œç±»å‹æ£€æŸ¥ â€“ React (reactjs.org)</a></p>
</blockquote>
<h3 id="4-å­ä¼ çˆ¶"><a href="#4-å­ä¼ çˆ¶" class="headerlink" title="4. å­ä¼ çˆ¶"></a><strong>4. å­ä¼ çˆ¶</strong></h3><p>â€¢ é€šè¿‡ä»çˆ¶ç»„ä»¶ä¸­ä¼ é€’è¿‡æ¥çš„å‡½æ•°å°†å‚æ•°ä¼ é€’è¿›å»å®ç°é€šä¿¡</p>
<p><strong>å­ä¼ çˆ¶ä»£ç ç¤ºä¾‹:</strong></p>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802162656554.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">AddCounter</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./AddCounter&#x27;</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">super</span>()<br><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">counter</span>: <span class="hljs-number">100</span><br>    &#125;<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123; counter &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        counter: &#123; counter &#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">AddCounter</span> <span class="hljs-attr">addCounter</span>=<span class="hljs-string">&#123;(number)</span>=&gt;</span> this.setState(&#123; counter: counter + number &#125;)&#125; /&gt;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AddCounter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br><br>  <span class="hljs-title function_">addCounter</span>(<span class="hljs-params">count</span>) &#123;<br>    <span class="hljs-comment">// ç»„ä»¶é€šä¿¡-å­ä¼ çˆ¶</span><br>    <span class="hljs-comment">// ç»„ä»¶é€šä¿¡ç›´æ¥ä»propsä¸­è·å–çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„å‡½æ•°æ¥é€šä¿¡</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-title function_">addCounter</span>(count)<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> this.addCounter(1)&#125;&gt;+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> this.addCounter(5)&#125;&gt;+5<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> this.addCounter(10)&#125;&gt;+10<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">AddCounter</span><br></code></pre></td></tr></table></figure>

<h2 id="7-ç»„ä»¶çš„æ’æ§½å®ç°"><a href="#7-ç»„ä»¶çš„æ’æ§½å®ç°" class="headerlink" title="7. ç»„ä»¶çš„æ’æ§½å®ç°"></a><strong>7. ç»„ä»¶çš„æ’æ§½å®ç°</strong></h2><h3 id="7-1-å®ç°æ–¹å¼ä¸€ï¼ˆä¸æ¨èï¼‰"><a href="#7-1-å®ç°æ–¹å¼ä¸€ï¼ˆä¸æ¨èï¼‰" class="headerlink" title="7.1. å®ç°æ–¹å¼ä¸€ï¼ˆä¸æ¨èï¼‰"></a><strong>7.1. å®ç°æ–¹å¼ä¸€ï¼ˆä¸æ¨èï¼‰</strong></h3><p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802162859283.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">NavBar</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./nav-bar&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">NavBar</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>æ’æ§½1<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>æ’æ§½2<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>æ’æ§½3<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">NavBar</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">PropTypes</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;prop-types&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NavBar</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// å®ç°æ–¹å¼ä¸€ï¼šä» this.props.children ä¸­å–å¾—ä¼ é€’çš„ç»„ä»¶/å€¼</span><br>    <span class="hljs-keyword">const</span> &#123; children &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span><br><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>1. å¯ä»¥é€šè¿‡æ•°ç»„çš„å½¢å¼å–å¾—å­ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;children[0]&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;children[1]&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;children[2]&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>2. å¯ä»¥é€šè¿‡éå†çš„å½¢å¼å–å¾—å­ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">        &#123;React.Children.map(children, (child, index) =&gt; &#123;</span><br><span class="language-xml">          return (</span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;index&#125;</span>&gt;</span>&#123;child&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">          )</span><br><span class="language-xml">        &#125;)&#125;</span><br><span class="language-xml"></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>3. ç›´æ¥è·å– children<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;children&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// æŒ‡å®šä¼ å…¥æ’æ§½çš„ä¼ å…¥ç±»å‹ä¸ºæ•°ç»„ï¼Œå¦‚æœä¸ç¬¦åˆï¼Œä¼šåœ¨æ§åˆ¶å°æŠ¥è­¦å‘Šï¼Œ</span><br><span class="hljs-comment">// å‡ºäºæ€§èƒ½æ–¹é¢çš„è€ƒè™‘ï¼ŒpropTypes ä»…åœ¨å¼€å‘æ¨¡å¼ä¸‹è¿›è¡Œæ£€æŸ¥</span><br><span class="hljs-title class_">NavBar</span>.<span class="hljs-property">propTypes</span> = &#123;<br>  <span class="hljs-attr">children</span>: <span class="hljs-title class_">PropTypes</span>.<span class="hljs-property">array</span>,<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">NavBar</span><br></code></pre></td></tr></table></figure>

<h3 id="2-å®ç°æ–¹å¼äºŒï¼ˆæ¨èï¼‰"><a href="#2-å®ç°æ–¹å¼äºŒï¼ˆæ¨èï¼‰" class="headerlink" title="2. å®ç°æ–¹å¼äºŒï¼ˆæ¨èï¼‰"></a><strong>2. å®ç°æ–¹å¼äºŒï¼ˆæ¨èï¼‰</strong></h3><p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802163006211.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">NavBarTwo</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./nav-bar-two&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">NavBarTwo</span> <span class="hljs-attr">firstSlot</span>=<span class="hljs-string">&#123;</span>&lt;<span class="hljs-attr">div</span>&gt;</span>æˆ‘æ˜¯æ’æ§½1<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>&#125; secondSlot=&#123;<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>æˆ‘æ˜¯æ’æ§½2<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>&#125; thirdSlot=&#123;<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>æˆ‘æ˜¯æ’æ§½3<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>&#125; /&gt;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NavBarTwo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123; firstSlot, secondSlot, thirdSlot &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span><br><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;firstSlot&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;secondSlot&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;thirdSlot&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">NavBarTwo</span><br></code></pre></td></tr></table></figure>

<h3 id="3-ä½œç”¨åŸŸæ’æ§½"><a href="#3-ä½œç”¨åŸŸæ’æ§½" class="headerlink" title="3. ä½œç”¨åŸŸæ’æ§½"></a><strong>3. ä½œç”¨åŸŸæ’æ§½</strong></h3><p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802163145744.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">NavBar</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./nav-bar&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br><br>  <span class="hljs-title function_">selectChange</span>(<span class="hljs-params">item</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(item)<br>    <span class="hljs-keyword">switch</span> (item) &#123;<br>      <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;home&#x27;</span>:<br>        <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;color:</span> &#x27;<span class="hljs-attr">red</span>&#x27;&#125;&#125;&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>      <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;about&#x27;</span>:<br>        <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;color:</span> &#x27;<span class="hljs-attr">skyblue</span>&#x27;&#125;&#125;&gt;</span>å…³äº<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>      <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;contact&#x27;</span>:<br>        <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;color:</span> &#x27;<span class="hljs-attr">black</span>&#x27;&#125;&#125;&gt;</span>è”ç³»æˆ‘ä»¬<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>      <span class="hljs-attr">default</span>:<br>        <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    &#125;<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">NavBar</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">&#123;item</span> =&gt;</span> this.selectChange(item)&#125; /&gt;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NavBar</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123; slot &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span><br><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;slot(&quot;about&quot;)&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">NavBar</span><br></code></pre></td></tr></table></figure>

<h2 id="8-éçˆ¶å­ç»„ä»¶é€šä¿¡-Context"><a href="#8-éçˆ¶å­ç»„ä»¶é€šä¿¡-Context" class="headerlink" title="8. éçˆ¶å­ç»„ä»¶é€šä¿¡ - Context"></a><strong>8. éçˆ¶å­ç»„ä»¶é€šä¿¡ - Context</strong></h2><h3 id="1-ä½œç”¨"><a href="#1-ä½œç”¨" class="headerlink" title="1. ä½œç”¨"></a><strong>1. ä½œç”¨</strong></h3><p>â€¢ éçˆ¶å­ç»„ä»¶é—´çš„æ•°æ®å…±äº«</p>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802163314731.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802163330667.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802163351806.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="2-ç±»ç»„ä»¶ä¸­ä½¿ç”¨-Context"><a href="#2-ç±»ç»„ä»¶ä¸­ä½¿ç”¨-Context" class="headerlink" title="2. ç±»ç»„ä»¶ä¸­ä½¿ç”¨ Context"></a><strong>2. ç±»ç»„ä»¶ä¸­ä½¿ç”¨ Context</strong></h3><p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802163442294.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> &#123; createContext &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-comment">// 1. å…ˆå£°æ˜ä¸€ä¸ªcontext</span><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">ThemeContext</span> = <span class="hljs-title function_">createContext</span>()<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">ThemeContext</span><br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ThemeContext</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./context/theme-context&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./Home&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">super</span>()<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">info</span>: &#123; <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;red&#x27;</span>, <span class="hljs-attr">level</span>: <span class="hljs-string">&#x27;é«˜çº§&#x27;</span> &#125;<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123; info &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>App<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        // 2. åœ¨contextä¸­å­˜å€¼</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">ThemeContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;&#123;color:</span> &quot;<span class="hljs-attr">red</span>&quot;, <span class="hljs-attr">size:</span> &quot;<span class="hljs-attr">30</span>&quot;&#125;&#125;&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Home</span> &#123;<span class="hljs-attr">...info</span>&#125;&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Home</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeContext.Provider</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ThemeContext</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./context/theme-context&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br><br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">super</span>()<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;æˆ‘æ˜¯Homeç»„ä»¶&#x27;</span><br>    &#125;<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>)<br><br>    <span class="hljs-keyword">const</span> &#123; title &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br><br>    <span class="hljs-keyword">const</span> &#123;color, size&#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span><br><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        &#123; title &#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>ä¸‹é¢æ˜¯ ThemeContext ä¸­çš„æ•°æ®ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">        &#123;/* ç¬¬ä¸€ç§å†™æ³•ï¼š */&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">ThemeContext.Consumer</span>&gt;</span></span><br><span class="language-xml">          &#123;</span><br><span class="language-xml">            (ctx) =&gt; &#123;</span><br><span class="language-xml">              return (</span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">                  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>color: &#123; ctx.color &#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">                  <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></span><br><span class="language-xml">                  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>size: &#123; ctx.size &#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">              )</span><br><span class="language-xml">            &#125;</span><br><span class="language-xml">          &#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeContext.Consumer</span>&gt;</span></span><br><span class="language-xml">        &#123;/* ç¬¬äºŒç§å†™æ³•ï¼š */&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>ç¬¬äºŒç§å†™æ³•ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>color: &#123;color&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>size: &#123;size&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-title class_">Home</span>.<span class="hljs-property">contextType</span> = <span class="hljs-title class_">ThemeContext</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Home</span><br></code></pre></td></tr></table></figure>

<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802163548963.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="3-å‡½æ•°å¼ç»„ä»¶è·å–-context-ä¸­çš„æ•°æ®"><a href="#3-å‡½æ•°å¼ç»„ä»¶è·å–-context-ä¸­çš„æ•°æ®" class="headerlink" title="3. å‡½æ•°å¼ç»„ä»¶è·å– context ä¸­çš„æ•°æ®"></a><strong>3. å‡½æ•°å¼ç»„ä»¶è·å– context ä¸­çš„æ•°æ®</strong></h3><p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802163547853.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ThemeContext</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./context/theme-context&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./Home&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">HomeBanner</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./HomeBanner&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">super</span>()<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">info</span>: &#123; <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;red&#x27;</span>, <span class="hljs-attr">level</span>: <span class="hljs-string">&#x27;é«˜çº§&#x27;</span> &#125;<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123; info &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>App<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">ThemeContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;&#123;color:</span> &quot;<span class="hljs-attr">red</span>&quot;, <span class="hljs-attr">size:</span> &quot;<span class="hljs-attr">30</span>&quot;&#125;&#125;&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Home</span> &#123;<span class="hljs-attr">...info</span>&#125;&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Home</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">HomeBanner</span>/&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeContext.Provider</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ThemeContext</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./context/theme-context&#x27;</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">HomeBanner</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>HomeBanner å‡½æ•°å¼ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">ThemeContext.Consumer</span>&gt;</span></span><br><span class="language-xml">        &#123;</span><br><span class="language-xml">          (ctx) =&gt; &#123;</span><br><span class="language-xml">            return (</span><br><span class="language-xml">              <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>color: &#123; ctx.color &#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>size: &#123; ctx.size &#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">              <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">            )</span><br><span class="language-xml">          &#125;</span><br><span class="language-xml">        &#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeContext.Consumer</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">HomeBanner</span><br></code></pre></td></tr></table></figure>

<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802163729208.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="4-context-ä¸­çš„é»˜è®¤å€¼è®¾ç½®"><a href="#4-context-ä¸­çš„é»˜è®¤å€¼è®¾ç½®" class="headerlink" title="4. context ä¸­çš„é»˜è®¤å€¼è®¾ç½®"></a><strong>4. context ä¸­çš„é»˜è®¤å€¼è®¾ç½®</strong></h3><p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802163809368.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> &#123; createContext &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-comment">// 1. åœ¨åˆ›å»ºçš„conntextæ—¶å€™è®¾ç½®é»˜è®¤å€¼ï¼Œ</span><br><span class="hljs-comment">// æ³¨æ„åé¢ä½¿ç”¨æ—¶ ThemeContext.Provider ä¸­åªè¦è®¾ç½®äº†valueå±æ€§ï¼Œè¿™é‡Œè®¾ç½®çš„æ‰€æœ‰é»˜è®¤å€¼éƒ½ä¼šè¢«è¦†ç›–æ‰</span><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">ThemeContext</span> = <span class="hljs-title function_">createContext</span>(&#123;<span class="hljs-attr">nickname</span>: <span class="hljs-string">&#x27;coderwhy&#x27;</span>, <span class="hljs-attr">level</span>: <span class="hljs-string">&#x27;é«˜çº§&#x27;</span>&#125;)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">ThemeContext</span><br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ThemeContext</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./context/theme-context&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Profile</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Profile<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">ThemeContext.Consumer</span>&gt;</span></span><br><span class="language-xml">          &#123;</span><br><span class="language-xml">            (ctx) =&gt; &#123;</span><br><span class="language-xml">              return (</span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">                  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>nickname: &#123; ctx.nickname &#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">                  <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></span><br><span class="language-xml">                  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>level: &#123; ctx.level &#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">              )</span><br><span class="language-xml">            &#125;</span><br><span class="language-xml">          &#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeContext.Consumer</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Profile</span><br></code></pre></td></tr></table></figure>

<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802163901155.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="5-å¤šä¸ª-context-ä½¿ç”¨"><a href="#5-å¤šä¸ª-context-ä½¿ç”¨" class="headerlink" title="5. å¤šä¸ª context ä½¿ç”¨"></a><strong>5. å¤šä¸ª context ä½¿ç”¨</strong></h3><p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802163932163.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> &#123; createContext &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">UserContext</span> = <span class="hljs-title function_">createContext</span>()<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">UserContext</span><br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ThemeContext</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./context/theme-context&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./Home&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">HomeBanner</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./HomeBanner&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Profile</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./Profile&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">UserContext</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./context/user-context&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">super</span>()<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">info</span>: &#123; <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;red&#x27;</span>, <span class="hljs-attr">level</span>: <span class="hljs-string">&#x27;é«˜çº§&#x27;</span> &#125;<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123; info &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>App<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">ThemeContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;&#123;color:</span> &quot;<span class="hljs-attr">red</span>&quot;, <span class="hljs-attr">size:</span> &quot;<span class="hljs-attr">30</span>&quot;&#125;&#125;&gt;</span></span><br><span class="language-xml">          // è¿™é‡Œå¤šä¸ªcontextåµŒå¥—ä½¿ç”¨</span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">UserContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;&#123;name:</span> &quot;<span class="hljs-attr">wuyanzu</span>&quot;, <span class="hljs-attr">age:</span> &quot;<span class="hljs-attr">18</span>&quot;&#125;&#125;&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">Home</span> &#123;<span class="hljs-attr">...info</span>&#125;&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Home</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">HomeBanner</span>/&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">UserContext.Provider</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeContext.Provider</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Profile</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Profile</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ThemeContext</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./context/theme-context&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">UserContext</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./context/user-context&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br><br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">super</span>()<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;æˆ‘æ˜¯Homeç»„ä»¶&#x27;</span><br>    &#125;<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>)<br><br>    <span class="hljs-keyword">const</span> &#123; title &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br><br>    <span class="hljs-keyword">const</span> &#123;color, size&#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span><br><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        &#123; title &#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>ä¸‹é¢æ˜¯ ThemeContext ä¸­çš„æ•°æ®ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">        &#123;/* ç¬¬ä¸€ç§å†™æ³•ï¼š */&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">ThemeContext.Consumer</span>&gt;</span></span><br><span class="language-xml">          &#123;</span><br><span class="language-xml">            (ctx) =&gt; &#123;</span><br><span class="language-xml">              return (</span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">                  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>color: &#123; ctx.color &#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">                  <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></span><br><span class="language-xml">                  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>size: &#123; ctx.size &#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">              )</span><br><span class="language-xml">            &#125;</span><br><span class="language-xml">          &#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeContext.Consumer</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">UserContext.Consumer</span>&gt;</span></span><br><span class="language-xml">          &#123;</span><br><span class="language-xml">            (ctx) =&gt; &#123;</span><br><span class="language-xml">              return (</span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">                  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>name: &#123; ctx.name &#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">                  <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></span><br><span class="language-xml">                  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>age: &#123; ctx.age &#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">              )</span><br><span class="language-xml">            &#125;</span><br><span class="language-xml">          &#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">UserContext.Consumer</span>&gt;</span></span><br><span class="language-xml">        &#123;/* ç¬¬äºŒç§å†™æ³•ï¼š */&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>ç¬¬äºŒç§å†™æ³•ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>color: &#123;color&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>size: &#123;size&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-title class_">Home</span>.<span class="hljs-property">contextType</span> = <span class="hljs-title class_">ThemeContext</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Home</span><br></code></pre></td></tr></table></figure>

<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802164100120.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="9-éçˆ¶å­ç»„ä»¶é€šä¿¡-äº‹ä»¶æ€»çº¿"><a href="#9-éçˆ¶å­ç»„ä»¶é€šä¿¡-äº‹ä»¶æ€»çº¿" class="headerlink" title="9. éçˆ¶å­ç»„ä»¶é€šä¿¡ - äº‹ä»¶æ€»çº¿"></a><strong>9. éçˆ¶å­ç»„ä»¶é€šä¿¡ - äº‹ä»¶æ€»çº¿</strong></h2><h3 id="1-Install"><a href="#1-Install" class="headerlink" title="1. Install"></a><strong>1. Install</strong></h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">npm install hy-event-store<br></code></pre></td></tr></table></figure>

<h3 id="2-demo-case"><a href="#2-demo-case" class="headerlink" title="2. demo case"></a><strong>2. demo case</strong></h3><ol>
<li>åˆ›å»º eventBus å¯¹è±¡</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">HYEventBus</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;hy-event-store&#x27;</span><br><br><span class="hljs-keyword">const</span> eventBus = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HYEventBus</span>()<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> eventBus<br></code></pre></td></tr></table></figure>

<ol>
<li>ä½¿ç”¨</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">import</span> eventBus <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./utils/event-bus&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">HelloOne</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./component/HelloOne&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">HelloTwo</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./component/HelloTwo&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br><br>  <span class="hljs-title function_">componentDidMount</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// ç›‘å¬äº‹ä»¶</span><br>    eventBus.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;helloOneSendEvent&quot;</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;æˆ‘æ˜¯Appç»„ä»¶ï¼Œç›‘å¬åˆ°äº†æ¥è‡ªHelloOneç»„ä»¶çš„äº‹ä»¶&#x27;</span>)<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(event)<br>    &#125;)<br>  &#125;<br><br>  <span class="hljs-title function_">componentWillUnmount</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// åœ¨ç»„ä»¶é”€æ¯æ—¶ï¼Œä¸€å®šè¦è®°å¾—å–æ¶ˆç›‘å¬äº‹ä»¶ï¼Œå…»æˆå¥½ä¹ æƒ¯</span><br>    eventBus.<span class="hljs-title function_">off</span>(<span class="hljs-string">&quot;helloOneSendEvent&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;&#125;)<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>App<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">HelloOne</span>/&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">HelloTwo</span>/&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> eventBus <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../utils/event-bus&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloOne</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br><br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">super</span>()<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">event</span>: <span class="hljs-string">&#x27;æˆ‘æ˜¯æ¥è‡ªHelloOneç»„ä»¶çš„ä¸€ä¸ªäº‹ä»¶&#x27;</span><br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">// å‘é€äº‹ä»¶</span><br>  eventSend = <span class="hljs-function">() =&gt;</span> &#123;<br>    eventBus.<span class="hljs-title function_">emit</span>(<span class="hljs-string">&#x27;helloOneSendEvent&#x27;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">event</span>)<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>HelloOne<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.eventSend&#125;</span>&gt;</span>click<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">HelloOne</span><br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> eventBus <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../utils/event-bus&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloTwo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br><br>  <span class="hljs-title function_">componentDidMount</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// ç›‘å¬äº‹ä»¶</span><br>    eventBus.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;helloOneSendEvent&quot;</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;æˆ‘æ˜¯HelloTwoç»„ä»¶ï¼Œç›‘å¬åˆ°äº†æ¥è‡ªHelloOneç»„ä»¶çš„äº‹ä»¶&#x27;</span>)<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(event)<br>    &#125;)<br>  &#125;<br><br>  <span class="hljs-title function_">componentWillUnmount</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// åœ¨ç»„ä»¶é”€æ¯æ—¶ï¼Œä¸€å®šè¦è®°å¾—å–æ¶ˆç›‘å¬äº‹ä»¶ï¼Œå…»æˆå¥½ä¹ æƒ¯</span><br>    eventBus.<span class="hljs-title function_">off</span>(<span class="hljs-string">&quot;helloOneSendEvent&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;&#125;)<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>HelloTwo<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">HelloTwo</span><br></code></pre></td></tr></table></figure>

<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802164528890.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="3-å­˜åœ¨thisç»‘å®šé—®é¢˜"><a href="#3-å­˜åœ¨thisç»‘å®šé—®é¢˜" class="headerlink" title="3. å­˜åœ¨thisç»‘å®šé—®é¢˜"></a><strong>3. å­˜åœ¨thisç»‘å®šé—®é¢˜</strong></h3><p><strong>1. é—®é¢˜å¤ç°</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> eventBus <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../utils/event-bus&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloTwo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br><br>  <span class="hljs-title function_">componentDidMount</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// ç›‘å¬äº‹ä»¶</span><br>    eventBus.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;helloOneSendEvent&quot;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleHelloOneEvent</span>)<br>  &#125;<br><br>  <span class="hljs-title function_">handleHelloOneEvent</span>(<span class="hljs-params">event</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;æˆ‘æ˜¯HelloTwoç»„ä»¶ï¼Œç›‘å¬åˆ°äº†æ¥è‡ªHelloOneç»„ä»¶çš„äº‹ä»¶&#x27;</span>)<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(event)<br>    <span class="hljs-comment">// è¿™é‡Œæ‰“å°ä¸‹thisï¼Œæ˜¯ undefinedï¼Œè¯æ˜æˆ‘ä»¬åœ¨è¿™é‡Œå¤„ç†æ—¶æ— æ³•é€šè¿‡thisé‚£å€’state</span><br>    <span class="hljs-comment">// ä¹Ÿå°±æ— æ³•é€šè¿‡this.setStateæ¥æ›´æ–°çŠ¶æ€</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>)<br>  &#125;<br><br>  <span class="hljs-title function_">componentWillUnmount</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// åœ¨ç»„ä»¶é”€æ¯æ—¶ï¼Œä¸€å®šè¦è®°å¾—å–æ¶ˆç›‘å¬äº‹ä»¶ï¼Œå…»æˆå¥½ä¹ æƒ¯</span><br>    eventBus.<span class="hljs-title function_">off</span>(<span class="hljs-string">&quot;helloOneSendEvent&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;&#125;)<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>HelloTwo<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">HelloTwo</span><br></code></pre></td></tr></table></figure>

<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802164644764.png" srcset="/img/loading.gif" lazyload></p>
<p><strong>2. ä¿®å¤</strong></p>
<p>æ–¹æ³•ä¸€å’Œæ–¹æ³•äºŒä»»é€‰ä¸€ä¸ªå°±å¯ä»¥:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> eventBus <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../utils/event-bus&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloTwo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br><br>  <span class="hljs-title function_">componentDidMount</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// ç›‘å¬äº‹ä»¶</span><br>    <span class="hljs-comment">// ä¿®å¤æ–¹æ³•ä¸€ï¼šé€šè¿‡bindç»‘å®šthisï¼Œæ‰èƒ½é€šè¿‡this.setStateæ¥æ›´æ–°çŠ¶æ€</span><br>    eventBus.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;helloOneSendEvent&quot;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleHelloOneEvent</span>)<br>  &#125;<br><br>  <span class="hljs-comment">// handleHelloOneEvent(event) &#123;</span><br>  <span class="hljs-comment">//   console.log(&#x27;æˆ‘æ˜¯HelloTwoç»„ä»¶ï¼Œç›‘å¬åˆ°äº†æ¥è‡ªHelloOneç»„ä»¶çš„äº‹ä»¶&#x27;)</span><br>  <span class="hljs-comment">//   console.log(event)</span><br>  <span class="hljs-comment">//   // è¿™é‡Œæ‰“å°ä¸‹thisï¼Œæ˜¯ undefinedï¼Œè¯æ˜æˆ‘ä»¬åœ¨è¿™é‡Œå¤„ç†æ—¶æ— æ³•é€šè¿‡thisé‚£å€’state</span><br>  <span class="hljs-comment">//   // ä¹Ÿå°±æ— æ³•é€šè¿‡this.setStateæ¥æ›´æ–°çŠ¶æ€</span><br>  <span class="hljs-comment">//   console.log(this)</span><br>  <span class="hljs-comment">// &#125;</span><br><br>  <span class="hljs-comment">// ä¿®å¤æ–¹æ³•äºŒï¼šé€šè¿‡ç®­å¤´å‡½æ•°ï¼Œé€šè¿‡ç®­å¤´å‡½æ•°çš„thisæ¥è·å–thisï¼Œä»è€Œé€šè¿‡thisæ¥æ›´æ–°çŠ¶æ€</span><br>  handleHelloOneEvent = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;æˆ‘æ˜¯HelloTwoç»„ä»¶ï¼Œç›‘å¬åˆ°äº†æ¥è‡ªHelloOneç»„ä»¶çš„äº‹ä»¶&#x27;</span>)<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(event)<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>)<br>  &#125;<br><br>  <span class="hljs-title function_">componentWillUnmount</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// åœ¨ç»„ä»¶é”€æ¯æ—¶ï¼Œä¸€å®šè¦è®°å¾—å–æ¶ˆç›‘å¬äº‹ä»¶ï¼Œå…»æˆå¥½ä¹ æƒ¯</span><br>    eventBus.<span class="hljs-title function_">off</span>(<span class="hljs-string">&quot;helloOneSendEvent&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;&#125;)<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>HelloTwo<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">HelloTwo</span><br></code></pre></td></tr></table></figure>

<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802164807534.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="10-setState-ç”¨æ³•åŠåŸç†å‚è€ƒ"><a href="#10-setState-ç”¨æ³•åŠåŸç†å‚è€ƒ" class="headerlink" title="10. setState ç”¨æ³•åŠåŸç†å‚è€ƒ"></a><strong>10. setState ç”¨æ³•åŠåŸç†å‚è€ƒ</strong></h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_44285582/article/details/142868211">React(å››) äº‹ä»¶æ€»çº¿ï¼ŒsetStateçš„åŸç†ï¼ŒPureComponentä¼˜åŒ–Reactæ€§èƒ½,refè·å–ç±»ç»„ä»¶ä¸å‡½æ•°ç»„ä»¶_reactäº‹ä»¶æ€»çº¿-CSDNåšå®¢</a></p>
</blockquote>
<h3 id="1-setStateçš„ä¸‰ç§ç”¨æ³•"><a href="#1-setStateçš„ä¸‰ç§ç”¨æ³•" class="headerlink" title="1. setStateçš„ä¸‰ç§ç”¨æ³•"></a><strong>1. setStateçš„ä¸‰ç§ç”¨æ³•</strong></h3><ul>
<li><strong>ç”¨æ³•ä¸€ï¼šåŸºæœ¬ä½¿ç”¨</strong></li>
</ul>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802165012910.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br><br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">super</span>()<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;Hello React&quot;</span><br>    &#125;<br>  &#125;<br><br>  <span class="hljs-title function_">changeMsg</span>(<span class="hljs-params"></span>) &#123;<br><br>    <span class="hljs-comment">// ç”¨æ³•ä¸€ï¼šç›´æ¥ä¿®æ”¹stateä¸­çš„æ•°æ®ï¼Œè¿™ä¸ªæ˜¯ä¸ªå¼‚æ­¥åŠ¨ä½œï¼Œ</span><br>    <span class="hljs-comment">//        ç­‰æ‰€æœ‰çš„stateçš„å€¼ä¿®æ”¹å¥½åæ‰ä¼šå»èµ°render()å‡½æ•°</span><br>    <span class="hljs-comment">//        åº•å±‚å…¶å®æ˜¯ç”¨äº†Object.assign(this.state,setStateçš„æ–°å¯¹è±¡)ï¼ŒæŠŠä¸¤ä¸ªå¯¹è±¡åšäº†åˆå¹¶ã€‚</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>      <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;ä½ å¥½å•Šï¼Œæé“¶æ²³ï¼&quot;</span><br>    &#125;)<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123; message &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;message&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;e</span> =&gt;</span> this.changeMsg()&#125;&gt;ç‚¹å‡»æˆ‘<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDom</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-dom/client&quot;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./10_setStateçš„ä¸‰ç§ç”¨æ³•/App&quot;</span><br><br><span class="hljs-comment">// ç¼–å†™reactä»£ç ï¼Œå¹¶è¿›è¡Œæ¸²æŸ“</span><br><span class="hljs-keyword">const</span> root = <span class="hljs-title class_">ReactDom</span>.<span class="hljs-title function_">createRoot</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;root&quot;</span>))<br>root.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>)<br></code></pre></td></tr></table></figure>

<ul>
<li><strong>ç”¨æ³•äºŒï¼šä¼ å…¥å›è°ƒå‡½æ•°</strong></li>
</ul>
<blockquote>
<p>å¥½å¤„ä¸€: å¯ä»¥åœ¨å›è°ƒå‡½æ•°ä¸­ç¼–å†™å¯¹æ–°stateå¤„ç†çš„é€»è¾‘<br>å¥½å¤„äºŒ: å½“å‰çš„å›è°ƒå‡½æ•°ä¼šå°†ä¹‹å‰çš„stateå’Œpropsä¼ é€’è¿›æ¥</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br><br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">super</span>()<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;Hello React&quot;</span><br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">// changeMsg() &#123;</span><br><br>  <span class="hljs-comment">//   // ç”¨æ³•ä¸€ï¼šç›´æ¥ä¿®æ”¹stateä¸­çš„æ•°æ®ï¼Œè¿™ä¸ªæ˜¯ä¸ªå¼‚æ­¥åŠ¨ä½œï¼Œ</span><br>  <span class="hljs-comment">//   //        ç­‰æ‰€æœ‰çš„stateçš„å€¼ä¿®æ”¹å¥½åæ‰ä¼šå»èµ°render()å‡½æ•°</span><br>  <span class="hljs-comment">//   //        åº•å±‚å…¶å®æ˜¯ç”¨äº†Object.assign(this.state,setStateçš„æ–°å¯¹è±¡)ï¼ŒæŠŠä¸¤ä¸ªå¯¹è±¡åšäº†åˆå¹¶ã€‚</span><br>  <span class="hljs-comment">//   this.setState(&#123;</span><br>  <span class="hljs-comment">//     message: &quot;ä½ å¥½å•Šï¼Œæé“¶æ²³ï¼&quot;</span><br>  <span class="hljs-comment">//   &#125;)</span><br>  <span class="hljs-comment">// &#125;</span><br><br>  <span class="hljs-title function_">changeMsg</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// ç”¨æ³•äºŒï¼šå¯ä»¥ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¼šæ¥æ”¶åˆ°stateå’Œpropsä¸¤ä¸ªå‚æ•°ï¼Œ</span><br>    <span class="hljs-comment">//        è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼ä¼šä½œä¸ºstateçš„æ–°å€¼</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(<span class="hljs-function">(<span class="hljs-params">state, props</span>) =&gt;</span> &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(state.<span class="hljs-property">message</span>, props)<br><br>      <span class="hljs-keyword">return</span> &#123;<br>        <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;ä½ å¥½å•Šï¼Œæé“¶æ²³ï¼&quot;</span><br>      &#125;<br>    &#125;)<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123; message &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;message&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;e</span> =&gt;</span> this.changeMsg()&#125;&gt;ç‚¹å‡»æˆ‘<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure>

<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802165239253.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li><strong>ç”¨æ³•ä¸‰ï¼šsetState æ˜¯ä¸€ä¸ªå¼‚æ­¥è°ƒç”¨ï¼Œä¼ å…¥ callback æ¥ä½¿ç”¨æœ€æ–°çš„ state çš„å€¼å¤„ç†é€»è¾‘</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br><br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">super</span>()<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;Hello React&quot;</span><br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">// changeMsg() &#123;</span><br><br>  <span class="hljs-comment">//   // ç”¨æ³•ä¸€ï¼šç›´æ¥ä¿®æ”¹stateä¸­çš„æ•°æ®ï¼Œè¿™ä¸ªæ˜¯ä¸ªå¼‚æ­¥åŠ¨ä½œï¼Œ</span><br>  <span class="hljs-comment">//   //        ç­‰æ‰€æœ‰çš„stateçš„å€¼ä¿®æ”¹å¥½åæ‰ä¼šå»èµ°render()å‡½æ•°</span><br>  <span class="hljs-comment">//   //        åº•å±‚å…¶å®æ˜¯ç”¨äº†Object.assign(this.state,setStateçš„æ–°å¯¹è±¡)ï¼ŒæŠŠä¸¤ä¸ªå¯¹è±¡åšäº†åˆå¹¶ã€‚</span><br>  <span class="hljs-comment">//   this.setState(&#123;</span><br>  <span class="hljs-comment">//     message: &quot;ä½ å¥½å•Šï¼Œæé“¶æ²³ï¼&quot;</span><br>  <span class="hljs-comment">//   &#125;)</span><br>  <span class="hljs-comment">// &#125;</span><br><br>  <span class="hljs-comment">// changeMsg() &#123;</span><br>  <span class="hljs-comment">//   // ç”¨æ³•äºŒï¼šå¯ä»¥ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¼šæ¥æ”¶åˆ°stateå’Œpropsä¸¤ä¸ªå‚æ•°ï¼Œ</span><br>  <span class="hljs-comment">//   //        è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼ä¼šä½œä¸ºstateçš„æ–°å€¼</span><br>  <span class="hljs-comment">//   this.setState((state, props) =&gt; &#123;</span><br>  <span class="hljs-comment">//     console.log(state.message, props)</span><br><br>  <span class="hljs-comment">//     return &#123;</span><br>  <span class="hljs-comment">//       message: &quot;ä½ å¥½å•Šï¼Œæé“¶æ²³ï¼&quot;</span><br>  <span class="hljs-comment">//     &#125;</span><br>  <span class="hljs-comment">//   &#125;)</span><br>  <span class="hljs-comment">// &#125;</span><br><br>  <span class="hljs-title function_">changeMsg</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// ç”¨æ³•ä¸‰ï¼šå¯ä»¥ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼ä¼šä½œä¸ºstateçš„æ–°å€¼ï¼Œå¹¶ä¸”å¯ä»¥ä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œ</span><br>    <span class="hljs-comment">//        è¿™ä¸ªå›è°ƒå‡½æ•°ä¼šåœ¨stateæ›´æ–°å®Œæ¯•åæ‰§è¡Œï¼Œå¯ä»¥è·å–åˆ°æœ€æ–°çš„state</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123; <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;ä½ å¥½å•Šï¼Œæé“¶æ²³ï¼&quot;</span>&#125;, <span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-comment">// å›è°ƒå‡½æ•°ï¼Œåœ¨stateæ›´æ–°å®Œæ¯•åæ‰§è¡Œï¼Œå¯ä»¥è·å–åˆ°æœ€æ–°çš„state</span><br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">message</span>)<br>    &#125;)<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123; message &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;message&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;e</span> =&gt;</span> this.changeMsg()&#125;&gt;ç‚¹å‡»æˆ‘<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure>

<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802165357084.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="2-react-ä¸ºä»€ä¹ˆè®¾è®¡æˆå¼‚æ­¥çš„ï¼Ÿ"><a href="#2-react-ä¸ºä»€ä¹ˆè®¾è®¡æˆå¼‚æ­¥çš„ï¼Ÿ" class="headerlink" title="2. react ä¸ºä»€ä¹ˆè®¾è®¡æˆå¼‚æ­¥çš„ï¼Ÿ"></a><strong>2. react ä¸ºä»€ä¹ˆè®¾è®¡æˆå¼‚æ­¥çš„ï¼Ÿ</strong></h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/facebook/react/issues/11527">https://github.com/facebook/react/issues/11527</a></p>
</blockquote>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802165500725.png" srcset="/img/loading.gif" lazyload></p>
<p>ğŸ“Œ <strong>æ³¨æ„äº‹é¡¹ä¸€ï¼šsetStateæ˜¯æ‰¹é‡æ›´æ–°çš„ï¼Œä¸æ˜¯æ¯æ¬¡è°ƒç”¨éƒ½ä¼šæ›´æ–°</strong></p>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802165602536.png" srcset="/img/loading.gif" lazyload></p>
<p>â€¢ é”™è¯¯ä½¿ç”¨</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br><br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">super</span>()<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">counter</span>: <span class="hljs-number">0</span><br>    &#125;<br>  &#125;<br><br>  <span class="hljs-title function_">increament</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// è¿™é‡Œçš„ counter æ‰§è¡Œå®Œæ–¹æ³•åç»“æœä¸º1ï¼Œ</span><br>    <span class="hljs-comment">// å› ä¸ºsetStateæ˜¯å¼‚æ­¥è°ƒç”¨ï¼Œæ¯æ¬¡è·å–çš„counterå€¼éƒ½ä¸º0</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>      <span class="hljs-attr">counter</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">counter</span> + <span class="hljs-number">1</span><br>    &#125;)<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>      <span class="hljs-attr">counter</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">counter</span> + <span class="hljs-number">1</span><br>    &#125;)<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>      <span class="hljs-attr">counter</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">counter</span> + <span class="hljs-number">1</span><br>    &#125;)<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;render ~&quot;</span>)<br><br>    <span class="hljs-keyword">const</span> &#123; counter &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;counter&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;e</span> =&gt;</span> this.increament()&#125;&gt;ç‚¹å‡»æˆ‘<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure>

<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802165650009.png" srcset="/img/loading.gif" lazyload></p>
<p>â€¢ æˆ‘ä»¬è¦æƒ³æ¯æ¬¡éƒ½æ‹¿åˆ°æœ€æ–°çš„ state çš„å€¼ä½¿ç”¨ï¼Œåº”è¯¥ç”¨<strong>å›è°ƒå‡½æ•°</strong>çš„æ–¹å¼:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br><br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">super</span>()<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">counter</span>: <span class="hljs-number">0</span><br>    &#125;<br>  &#125;<br><br>  <span class="hljs-title function_">increment</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(<span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">return</span> &#123;<br>        <span class="hljs-attr">counter</span>: state.<span class="hljs-property">counter</span> + <span class="hljs-number">1</span><br>      &#125;<br>    &#125;)<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(<span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">return</span> &#123;<br>        <span class="hljs-attr">counter</span>: state.<span class="hljs-property">counter</span> + <span class="hljs-number">1</span><br>      &#125;<br>    &#125;)<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(<span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">return</span> &#123;<br>        <span class="hljs-attr">counter</span>: state.<span class="hljs-property">counter</span> + <span class="hljs-number">1</span><br>      &#125;<br>    &#125;)<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;render ~&quot;</span>)<br><br>    <span class="hljs-keyword">const</span> &#123; counter &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;counter&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;e</span> =&gt;</span> this.increment()&#125;&gt;ç‚¹å‡»æˆ‘<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure>

<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802165743166.png" srcset="/img/loading.gif" lazyload></p>
<p>ğŸ“Œ <strong>æ³¨æ„äº‹é¡¹äºŒï¼šsetState åœ¨ React 18 ä¹‹å‰æ˜¯åŒæ­¥çš„ï¼ŒReact 18 ä¹‹åæ˜¯å¼‚æ­¥çš„</strong></p>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802165836696.png" srcset="/img/loading.gif" lazyload></p>
<p>ğŸ’¡ <strong>å°†setStateå¼‚æ­¥å˜ä¸ºåŒæ­¥</strong></p>
<ol>
<li>ä½¿ç”¨callbackå›è°ƒå‚æ•°</li>
<li>ä½¿ç”¨react-domä¸­çš„flushSync</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> &#123; flushSync &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-dom&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br><br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">super</span>()<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">counter</span>: <span class="hljs-number">0</span><br>    &#125;<br>  &#125;<br><br>  <span class="hljs-title function_">increment</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// å°†setStateçš„å›è°ƒå‡½æ•°å†™åˆ°flushSyncä¸­ï¼ŒåŒæ­¥æ›´æ–°stateååœ¨æ‰§è¡Œåç»­ä»£ç </span><br>    <span class="hljs-title function_">flushSync</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>        <span class="hljs-attr">counter</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">counter</span> + <span class="hljs-number">1</span><br>      &#125;)<br>    &#125;)<br>    <span class="hljs-comment">// è¿™é‡Œæ‰§è¡Œå®ŒflushSyncä¸­çš„æ–¹æ³•å¹¶æ›´æ–°åæ‰ä¼šæ‰§è¡Œè¿™é‡Œçš„ä»£ç </span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">counter</span>)<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;render ~&quot;</span>)<br><br>    <span class="hljs-keyword">const</span> &#123; counter &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;counter&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;e</span> =&gt;</span> this.increment()&#125;&gt;ç‚¹å‡»æˆ‘<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure>

<h2 id="11-React-æ€§èƒ½ä¼˜åŒ–"><a href="#11-React-æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="11. React æ€§èƒ½ä¼˜åŒ–"></a><strong>11. React æ€§èƒ½ä¼˜åŒ–</strong></h2><h3 id="1-diff-ç®—æ³•å’Œ-key-çš„ä½œç”¨"><a href="#1-diff-ç®—æ³•å’Œ-key-çš„ä½œç”¨" class="headerlink" title="1. diff ç®—æ³•å’Œ key çš„ä½œç”¨"></a><strong>1. diff ç®—æ³•å’Œ key çš„ä½œç”¨</strong></h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6967626390380216334">https://juejin.cn/post/6967626390380216334</a></p>
</blockquote>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802170118844.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802170134236.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802170148798.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="2-render-å‡½æ•°ä¼˜åŒ–"><a href="#2-render-å‡½æ•°ä¼˜åŒ–" class="headerlink" title="2. render å‡½æ•°ä¼˜åŒ–"></a><strong>2. render å‡½æ•°ä¼˜åŒ–</strong></h3><ol>
<li>é—®é¢˜</li>
</ol>
<p>é—®é¢˜è¯´æ˜ï¼šåœ¨æ¯ä¸ªç»„ä»¶ä¸­åŒ…å«çš„å­ç»„ä»¶ï¼Œåªè¦çˆ¶ç»„ä»¶çš„ä¸€ä¸ª state æˆ–è€… props å€¼è¢«ä¿®æ”¹ï¼Œè¯¥ç»„ä»¶ä»¥åŠå­ç»„ä»¶éƒ½ä¼šé‡æ–°æ‰§è¡Œ render å‡½æ•°</p>
<p>ğŸ‘¨ğŸ»â€ğŸ’» code demoï¼š</p>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802170400839.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./Home&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Recommend</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./Recommend&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br><br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">super</span>()<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">msg</span>: <span class="hljs-string">&quot;Hello React&quot;</span>,<br>      <span class="hljs-attr">counter</span>: <span class="hljs-number">0</span><br>    &#125;<br>  &#125;<br><br>  <span class="hljs-title function_">changeMsg</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>      <span class="hljs-attr">msg</span>: <span class="hljs-string">&quot;ä½ å¥½å•Šï¼Œæé“¶æ²³ï¼&quot;</span><br>    &#125;)<br>  &#125;<br><br>  <span class="hljs-title function_">increment</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>      <span class="hljs-attr">counter</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">counter</span> + <span class="hljs-number">1</span><br>    &#125;)<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;App render ~&quot;</span>)<br><br>    <span class="hljs-keyword">const</span> &#123; msg, counter &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>App<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;msg&#125; - &#123;counter&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;e</span> =&gt;</span> this.changeMsg()&#125;&gt;ä¿®æ”¹msg<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;e</span> =&gt;</span> this.increment()&#125;&gt;+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Home</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Recommend</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/&gt;</span></span><br>      <br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Home render ~&quot;</span>)<br><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Home</span><br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Recommend</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Recommend render ~&quot;</span>)<br><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Recommend<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Recommend</span><br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDom</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-dom/client&quot;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./11_renderå‡½æ•°çš„ä¼˜åŒ–/App&quot;</span><br><br><span class="hljs-comment">// ç¼–å†™reactä»£ç ï¼Œå¹¶è¿›è¡Œæ¸²æŸ“</span><br><span class="hljs-keyword">const</span> root = <span class="hljs-title class_">ReactDom</span>.<span class="hljs-title function_">createRoot</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;root&quot;</span>))<br>root.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>)<br></code></pre></td></tr></table></figure>

<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802170559574.png" srcset="/img/loading.gif" lazyload></p>
<p>ğŸ’¡ <strong>è§£æ³•ä¸€ï¼šä½¿ç”¨ shouldComponentUpdate æ¥é˜»æ­¢æ›´æ–°ï¼ˆSCUä¼˜åŒ–ï¼‰</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br><br>  <span class="hljs-title function_">shouldComponentUpdate</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// åœ¨è¿™é‡Œæ‰§è¡Œä¸€äº›åˆ¤æ–­ï¼Œè¿”å›falseï¼Œé˜»æ­¢æ›´æ–°ï¼Œè¿”å›trueï¼Œåˆ™æ‰§è¡Œè¯¥ç»„ä»¶çš„renderå‡½æ•°</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Home render ~&quot;</span>)<br><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Home</span><br></code></pre></td></tr></table></figure>

<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802170730881.png" srcset="/img/loading.gif" lazyload></p>
<p>â€¢ åŒæ ·ï¼Œå½“æˆ‘ä»¬çš„ state çš„å€¼æ²¡æœ‰è¢«ä¿®æ”¹æ—¶ï¼Œä¹Ÿå¯ä»¥è¿™æ ·æ¥ä¼˜åŒ–</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./Home&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Recommend</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./Recommend&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br><br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">super</span>()<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">msg</span>: <span class="hljs-string">&quot;Hello React&quot;</span>,<br>      <span class="hljs-attr">counter</span>: <span class="hljs-number">0</span><br>    &#125;<br>  &#125;<br><br>  <span class="hljs-title function_">changeMsg</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>      <span class="hljs-comment">// msg: &quot;ä½ å¥½å•Šï¼Œæé“¶æ²³ï¼&quot;</span><br>      <span class="hljs-attr">msg</span>: <span class="hljs-string">&quot;Hello React&quot;</span><br>    &#125;)<br>  &#125;<br><br>  <span class="hljs-title function_">increment</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>      <span class="hljs-attr">counter</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">counter</span> + <span class="hljs-number">1</span><br>    &#125;)<br>  &#125;<br><br>  <span class="hljs-title function_">shouldComponentUpdate</span>(<span class="hljs-params">nextProps, nextState</span>) &#123;<br>    <span class="hljs-comment">// è¿™é‡Œæˆ‘ä»¬å¯ä»¥åˆ¤æ–­stateæˆ–è€…propså€¼åœ¨å˜åŒ–åéœ€ä¸éœ€è¦é‡æ–°æ‰§è¡Œrenderå‡½æ•°</span><br>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> === nextState) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;App render ~&quot;</span>)<br><br>    <span class="hljs-keyword">const</span> &#123; msg, counter &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>App<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;msg&#125; - &#123;counter&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;e</span> =&gt;</span> this.changeMsg()&#125;&gt;ä¿®æ”¹msg<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;e</span> =&gt;</span> this.increment()&#125;&gt;+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Home</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Recommend</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/&gt;</span></span><br>      <br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure>

<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802170834648.png" srcset="/img/loading.gif" lazyload></p>
<p>ğŸ’¡ <strong>è§£æ³•äºŒï¼šï¼ˆæ¨èï¼‰ä½¿ç”¨ PureComponent å’Œ memo æ¥è¿›è¡Œ render ä¼˜åŒ–</strong></p>
<ul>
<li>ç±»ç»„ä»¶ç»§æ‰¿ PureComponentï¼Œ å‡½æ•°å¼ç»„ä»¶ç”¨memoåŒ…è£¹ï¼Œç›®çš„è¿˜æ˜¯å½“ state æˆ–è€… props çš„å€¼ä¸å‘ç”Ÿå˜åŒ–æ—¶ä¸è¿›è¡Œ render æ¸²æŸ“</li>
</ul>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802170948807.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802171001997.png" srcset="/img/loading.gif" lazyload></p>
<p>ğŸ‘¨ğŸ»â€ğŸ’» code demoï¼š</p>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802171031792.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">PureComponent</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./Home&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Recommend</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./Recommend&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Profile</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./Profile&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">PureComponent</span> &#123;<br><br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">super</span>()<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">msg</span>: <span class="hljs-string">&quot;Hello React&quot;</span>,<br>      <span class="hljs-attr">counter</span>: <span class="hljs-number">0</span><br>    &#125;<br>  &#125;<br><br>  <span class="hljs-title function_">changeMsg</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>      <span class="hljs-comment">// msg: &quot;ä½ å¥½å•Šï¼Œæé“¶æ²³ï¼&quot;</span><br>      <span class="hljs-attr">msg</span>: <span class="hljs-string">&quot;Hello React&quot;</span><br>    &#125;)<br>  &#125;<br><br>  <span class="hljs-title function_">increment</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>      <span class="hljs-attr">counter</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">counter</span> + <span class="hljs-number">1</span><br>    &#125;)<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;App render ~&quot;</span>)<br><br>    <span class="hljs-keyword">const</span> &#123; msg, counter &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>App<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;msg&#125; - &#123;counter&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;e</span> =&gt;</span> this.changeMsg()&#125;&gt;ä¿®æ”¹msg<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;e</span> =&gt;</span> this.increment()&#125;&gt;+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Home</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Recommend</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Profile</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/&gt;</span></span><br>      <br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">PureComponent</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">PureComponent</span> &#123;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Home render ~&quot;</span>)<br><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Home</span><br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; memo &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">Profile</span> = <span class="hljs-title function_">memo</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Profile render ~&quot;</span>)<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Profile<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Profile</span><br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">PureComponent</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Recommend</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">PureComponent</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Recommend render ~&quot;</span>)<br><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Recommend<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Recommend</span><br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDom</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-dom/client&quot;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./11_renderå‡½æ•°çš„ä¼˜åŒ–/App&quot;</span><br><br><span class="hljs-comment">// ç¼–å†™reactä»£ç ï¼Œå¹¶è¿›è¡Œæ¸²æŸ“</span><br><span class="hljs-keyword">const</span> root = <span class="hljs-title class_">ReactDom</span>.<span class="hljs-title function_">createRoot</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;root&quot;</span>))<br>root.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>)<br></code></pre></td></tr></table></figure>

<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802171238980.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="3-æ•°æ®ä¸å¯å˜çš„åŠ›é‡"><a href="#3-æ•°æ®ä¸å¯å˜çš„åŠ›é‡" class="headerlink" title="3. æ•°æ®ä¸å¯å˜çš„åŠ›é‡"></a><strong>3. æ•°æ®ä¸å¯å˜çš„åŠ›é‡</strong></h3><blockquote>
<p>å‚è€ƒï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/24926838">https://zhuanlan.zhihu.com/p/24926838</a></li>
<li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000021162454">https://segmentfault.com/a/1190000021162454</a></li>
</ul>
</blockquote>
<p>â€¢ æˆ‘ä»¬é€šå¸¸å†™çš„ç±»ç»„ä»¶æˆ–è€…å‡½æ•°å¼ç»„ä»¶éƒ½ç»§æ‰¿è‡ª PureComponent æˆ–è€…è¢« memo æ‰€åŒ…è£¹ï¼Œè¿™æ ·åœ¨ setState æˆ–è€… useState çš„æ—¶å€™ï¼Œéƒ½éœ€è¦ä¿è¯æ–°å¯¹è±¡å’Œæ—§å¯¹è±¡çš„å†…å­˜åœ°å€ä¸ä¸€æ ·ï¼Œæ‰å¯ä»¥è§¦å‘é¡µé¢æ¸²æŸ“ã€‚</p>
<p>ğŸ‘¨ğŸ»â€ğŸ’» code caseï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">PureComponent</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">PureComponent</span> &#123;<br><br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">super</span>()<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">books</span>: [<br>        &#123;<br>          <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;è®¡ç®—æœºç½‘ç»œå…¥é—¨&quot;</span>,<br>          <span class="hljs-attr">price</span>: <span class="hljs-number">23</span>,<br>          <span class="hljs-attr">count</span>: <span class="hljs-number">10</span>,<br>        &#125;,<br>        &#123;<br>          <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;ä½ ä¸çŸ¥é“çš„javascript&quot;</span>,<br>          <span class="hljs-attr">price</span>: <span class="hljs-number">67</span>,<br>          <span class="hljs-attr">count</span>: <span class="hljs-number">7</span>,<br>        &#125;,<br>        &#123;<br>          <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;ç®—æ³•å›¾è§£&quot;</span>,<br>          <span class="hljs-attr">price</span>: <span class="hljs-number">48</span>,<br>          <span class="hljs-attr">count</span>: <span class="hljs-number">3</span>,<br>        &#125;<br>      ]<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-title function_">addBook</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> newBook = &#123;<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Golangé«˜çº§ç¨‹åºè¯­è¨€è®¾è®¡&quot;</span>,<br>        <span class="hljs-attr">price</span>: <span class="hljs-number">48</span>,<br>        <span class="hljs-attr">count</span>: <span class="hljs-number">3</span>,<br>    &#125;<br><br>    <span class="hljs-comment">// ä¸è¦è¿™æ ·ç›´æ¥ä¿®æ”¹stateä¸‹é¢çš„å€¼ï¼Œå¦åˆ™ä¸ä¼šè§¦å‘é¡µé¢æ¸²æŸ“</span><br><br>    <span class="hljs-comment">// 1. ç›´æ¥ä¿®æ”¹åŸæœ‰çš„ stateï¼Œå†é‡æ–°è®¾ç€ä¸€é state</span><br>    <span class="hljs-comment">//    åœ¨ PureComponent æ˜¯ä¸èƒ½å¼•èµ·é‡æ–°æ¸²æŸ“çš„</span><br>    <span class="hljs-comment">// this.state.books.push(newBook)</span><br>    <span class="hljs-comment">// this.setState(&#123;</span><br>    <span class="hljs-comment">//   books: this.state.books</span><br>    <span class="hljs-comment">// &#125;)</span><br><br>    <span class="hljs-comment">// éœ€è¦åƒä¸‹é¢è¿™æ ·åœ¨ setState è®¾ç½®çš„æ—¶å€™èµ‹å€¼ä¸€ä¸ªå’Œä¹‹å‰ä¸ä¸€æ ·çš„å¯¹è±¡ï¼Œæ‰å¯ä»¥è§¦å‘é¡µé¢æ¸²æŸ“</span><br>    <span class="hljs-comment">// èµ‹å€¼ä¸€ä»½æ–°çš„booksï¼Œåœ¨æ–°çš„books ä¸­åšä¿®æ”¹ï¼Œå¯ä»¥é€ æˆé‡æ–°æ¸²æŸ“</span><br>    <span class="hljs-keyword">const</span> books = [...<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">books</span>, newBook]<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>      <span class="hljs-attr">books</span>: books<br>    &#125;)<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123; books &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>App Books<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">          &#123;</span><br><span class="language-xml">            books.map((item, index) =&gt; &#123;</span><br><span class="language-xml">              return (</span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;index&#125;</span>&gt;</span>name: &#123;item.name&#125;  price: &#123;item.price&#125; count: &#123;item.count&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">              )</span><br><span class="language-xml">            &#125;)</span><br><span class="language-xml">          &#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;e</span> =&gt;</span> &#123;this.addBook()&#125;&#125;&gt;æ·»åŠ ä¸€æœ¬ä¹¦<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure>

<p>case: ä¿®æ”¹booksçš„count</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">PureComponent</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">PureComponent</span> &#123;<br><br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">super</span>()<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">books</span>: [<br>        &#123;<br>          <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;è®¡ç®—æœºç½‘ç»œå…¥é—¨&quot;</span>,<br>          <span class="hljs-attr">price</span>: <span class="hljs-number">23</span>,<br>          <span class="hljs-attr">count</span>: <span class="hljs-number">10</span>,<br>        &#125;,<br>        &#123;<br>          <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;ä½ ä¸çŸ¥é“çš„javascript&quot;</span>,<br>          <span class="hljs-attr">price</span>: <span class="hljs-number">67</span>,<br>          <span class="hljs-attr">count</span>: <span class="hljs-number">7</span>,<br>        &#125;,<br>        &#123;<br>          <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;ç®—æ³•å›¾è§£&quot;</span>,<br>          <span class="hljs-attr">price</span>: <span class="hljs-number">48</span>,<br>          <span class="hljs-attr">count</span>: <span class="hljs-number">3</span>,<br>        &#125;<br>      ]<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-title function_">addBook</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> newBook = &#123;<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Golangé«˜çº§ç¨‹åºè¯­è¨€è®¾è®¡&quot;</span>,<br>        <span class="hljs-attr">price</span>: <span class="hljs-number">48</span>,<br>        <span class="hljs-attr">count</span>: <span class="hljs-number">3</span>,<br>    &#125;<br><br>    <span class="hljs-comment">// ä¸è¦è¿™æ ·ç›´æ¥ä¿®æ”¹stateä¸‹é¢çš„å€¼ï¼Œå¦åˆ™ä¸ä¼šè§¦å‘é¡µé¢æ¸²æŸ“</span><br><br>    <span class="hljs-comment">// 1. ç›´æ¥ä¿®æ”¹åŸæœ‰çš„ stateï¼Œå†é‡æ–°è®¾ç€ä¸€é state</span><br>    <span class="hljs-comment">//    åœ¨ PureComponent æ˜¯ä¸èƒ½å¼•èµ·é‡æ–°æ¸²æŸ“çš„</span><br>    <span class="hljs-comment">// this.state.books.push(newBook)</span><br>    <span class="hljs-comment">// this.setState(&#123;</span><br>    <span class="hljs-comment">//   books: this.state.books</span><br>    <span class="hljs-comment">// &#125;)</span><br><br>    <span class="hljs-comment">// éœ€è¦åƒä¸‹é¢è¿™æ ·åœ¨ setState è®¾ç½®çš„æ—¶å€™èµ‹å€¼ä¸€ä¸ªå’Œä¹‹å‰ä¸ä¸€æ ·çš„å¯¹è±¡ï¼Œæ‰å¯ä»¥è§¦å‘é¡µé¢æ¸²æŸ“</span><br>    <span class="hljs-comment">// èµ‹å€¼ä¸€ä»½æ–°çš„booksï¼Œåœ¨æ–°çš„books ä¸­åšä¿®æ”¹ï¼Œå¯ä»¥é€ æˆé‡æ–°æ¸²æŸ“</span><br>    <span class="hljs-keyword">const</span> books = [...<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">books</span>, newBook]<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>      <span class="hljs-attr">books</span>: books<br>    &#125;)<br>  &#125;<br><br>  <span class="hljs-title function_">addCount</span>(<span class="hljs-params">index</span>) &#123;<br>    <span class="hljs-keyword">const</span> books = [...<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">books</span>]<br>    books[index].<span class="hljs-property">count</span>++<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123; <span class="hljs-attr">books</span>: books &#125;)<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123; books &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span><br><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>App Books<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">          &#123;</span><br><span class="language-xml">            books.map((item, index) =&gt; &#123;</span><br><span class="language-xml">              return (</span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;index&#125;</span>&gt;</span></span><br><span class="language-xml">                  name: &#123;item.name&#125;  price: &#123;item.price&#125; count: &#123;item.count&#125;  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;e</span> =&gt;</span> &#123; this.addCount(index) &#125;&#125;&gt; +1 <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">              )</span><br><span class="language-xml">            &#125;)</span><br><span class="language-xml">          &#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;e</span> =&gt;</span> &#123;this.addBook()&#125;&#125;&gt;æ·»åŠ ä¸€æœ¬ä¹¦<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure>

<h2 id="12-ref-è·å–åŸç”Ÿ-dom-çš„ä¸‰ç§æ–¹å¼"><a href="#12-ref-è·å–åŸç”Ÿ-dom-çš„ä¸‰ç§æ–¹å¼" class="headerlink" title="12. ref è·å–åŸç”Ÿ dom çš„ä¸‰ç§æ–¹å¼"></a><strong>12. ref è·å–åŸç”Ÿ dom çš„ä¸‰ç§æ–¹å¼</strong></h2><blockquote>
<p>â€¢ React å¯ä»¥ä½¿ç”¨ ref æ¥è·å–åŸç”Ÿ dom å¯¹è±¡</p>
</blockquote>
<p>ğŸ‘¨ğŸ»â€ğŸ’» code caseï¼š</p>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802171642428.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; createRef, <span class="hljs-title class_">PureComponent</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">PureComponent</span> &#123;<br><br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">super</span>()<br><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = (&#123;<br><br>    &#125;)<br><br>    <span class="hljs-comment">// æ–¹å¼äºŒä¸­åˆ›å»ºrefå¯¹è±¡</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">yuyanRef</span> = <span class="hljs-title function_">createRef</span>()<br><br>    <span class="hljs-comment">// æ–¹å¼ä¸‰ä¸­åˆ›å»ºrefå¯¹è±¡</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dehuaRef</span> = <span class="hljs-literal">null</span><br>  &#125;<br><br>  <span class="hljs-title function_">getYanzuDom</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// æ–¹å¼ä¸€ï¼šï¼ˆå·²åºŸå¼ƒï¼‰ç›´æ¥åœ¨ React å…ƒç´ ä¸Šç»‘å®šä¸€ä¸ªå­—ç¬¦ä¸²</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">refs</span>.<span class="hljs-property">yanzuRef</span>)<br>  &#125;<br><br>  <span class="hljs-title function_">getYuyanDom</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// æ–¹å¼äºŒï¼šï¼ˆæ¨èï¼‰é¦–å…ˆåœ¨ constructor() ä¸­åˆ›å»ºä¸€ä¸ªrefï¼Œç„¶åç»‘å®šåˆ° React å…ƒç´ ä¸Š</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">yuyanRef</span>.<span class="hljs-property">current</span>)<br>  &#125;<br><br>  <span class="hljs-title function_">getDehuaDom</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// æ–¹å¼ä¸‰ï¼šä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå½“é¡µé¢è¢«æ¸²æŸ“åï¼Œå›è°ƒå‡½æ•°è¢«æ‰§è¡Œï¼Œå…ƒç´ è¢«ä¼ å…¥</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">dehuaRef</span>)<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>App<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;yanzuRef&quot;</span>&gt;</span>hello, yanzu wu<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span> <span class="hljs-symbol">&amp;nbsp;</span> <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;e</span> =&gt;</span> this.getYanzuDom()&#125;&gt;get yanzu&#x27;s dom<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;this.yuyanRef&#125;</span>&gt;</span>hello, yuyan peng<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span> <span class="hljs-symbol">&amp;nbsp;</span> <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;e</span> =&gt;</span> this.getYuyanDom()&#125;&gt;get yuyan&#x27;s dom<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;element</span> =&gt;</span> this.dehuaRef = element&#125;&gt;hello, dehua liu<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span> <span class="hljs-symbol">&amp;nbsp;</span> <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;e</span> =&gt;</span> this.getDehuaDom()&#125;&gt;get dehua&#x27;s dom<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure>

<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802171720058.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="13-ref-è·å–ç»„ä»¶ï¼ˆç±»ç»„ä»¶å’Œå‡½æ•°å¼ç»„ä»¶ï¼‰"><a href="#13-ref-è·å–ç»„ä»¶ï¼ˆç±»ç»„ä»¶å’Œå‡½æ•°å¼ç»„ä»¶ï¼‰" class="headerlink" title="13. ref è·å–ç»„ä»¶ï¼ˆç±»ç»„ä»¶å’Œå‡½æ•°å¼ç»„ä»¶ï¼‰"></a><strong>13. ref è·å–ç»„ä»¶ï¼ˆç±»ç»„ä»¶å’Œå‡½æ•°å¼ç»„ä»¶ï¼‰</strong></h2><ul>
<li>é€šè¿‡ ref è·å–ç»„ä»¶ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢ä»£ç æŸ¥çœ‹å…·ä½“è·å–æ–¹å¼ï¼Œæ³¨æ„å‡½æ•°å¼ç»„ä»¶ forwardRef å’Œ memo åŒ…è£¹å‡½æ•°çš„é¡ºåºã€‚</li>
</ul>
<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802171824222.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">PureComponent</span>, createRef &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Helloworld</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/Helloworld&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">MyFunction</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/MyFunction&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">PureComponent</span> &#123;<br><br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">super</span>()<br><br>    <span class="hljs-comment">// ç±»ç»„ä»¶ä¸­çš„ref</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">helloworldRef</span> = <span class="hljs-title function_">createRef</span>()<br>    <span class="hljs-comment">// å‡½æ•°å¼ç»„ä»¶ä¸­çš„ref</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">yanzuRef</span> = <span class="hljs-title function_">createRef</span>()<br>  &#125;<br><br>  <span class="hljs-title function_">getHelloworldRef</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">helloworldRef</span>.<span class="hljs-property">current</span>)<br>  &#125;<br><br>  <span class="hljs-title function_">getYanzuRef</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">yanzuRef</span>.<span class="hljs-property">current</span>)<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>App<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        &#123;/* ç±»ç»„ä»¶ */&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Helloworld</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;this.helloworldRef&#125;</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;e</span> =&gt;</span> this.getHelloworldRef()&#125;&gt;è·å–ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">        &#123;/* å‡½æ•°å¼ç»„ä»¶ */&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">MyFunction</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;this.yanzuRef&#125;/</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;e</span> =&gt;</span> this.getYanzuRef()&#125;&gt;è·å–ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">PureComponent</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Helloworld</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">PureComponent</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Helloworld<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>ğŸ‘‹ ä½ å¥½ï¼Œæé“¶æ²³ï¼ï¼ˆHelloworldç±»ç»„ä»¶ä¸­çš„ä¸€ä¸ªspanï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Helloworld</span><br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; memo, forwardRef &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">MyFunction</span> = <span class="hljs-title function_">memo</span>(<span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">(<span class="hljs-params">props, ref</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>MyFunction (å‡½æ•°å¼ç»„ä»¶)<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>ä½ å¥½ï¼Œå½­äºæ™ï¼<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;ref&#125;</span>&gt;</span>ä½ å¥½ï¼Œå´å½¦ç¥–ï¼<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/&gt;</span></span><br>  )<br>&#125;))<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">MyFunction</span><br></code></pre></td></tr></table></figure>

<p><img src="https://images-1306852673.cos.ap-chengdu.myqcloud.com/20250802172008611.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="14-å—æ§ç»„ä»¶å’Œéå—æ§ç»„ä»¶"><a href="#14-å—æ§ç»„ä»¶å’Œéå—æ§ç»„ä»¶" class="headerlink" title="14. å—æ§ç»„ä»¶å’Œéå—æ§ç»„ä»¶"></a><strong>14. å—æ§ç»„ä»¶å’Œéå—æ§ç»„ä»¶</strong></h2><p>todo</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E4%BB%A3%E7%A0%81%E7%AC%94%E8%AE%B0/" class="category-chain-item">ä»£ç ç¬”è®°</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/react/" class="print-no-link">#react</a>
      
        <a href="/tags/%E5%89%8D%E7%AB%AF/" class="print-no-link">#å‰ç«¯</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>React å­¦ä¹ ç¬”è®°</div>
      <div>https://yangfanbin.cn/ä»£ç ç¬”è®°/React å­¦ä¹ ç¬”è®°/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>ä½œè€…</div>
          <div>Yang Fanbin</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>å‘å¸ƒäº</div>
          <div>2025å¹´8æœˆ8æ—¥</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>è®¸å¯åè®®</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - ç½²å">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/%E4%BB%A3%E7%A0%81%E7%AC%94%E8%AE%B0/Golang%E9%9D%A2%E8%AF%95%E9%A2%98%E6%95%B4%E7%90%86/" title="Golangé¢è¯•é¢˜æ•´ç†">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Golangé¢è¯•é¢˜æ•´ç†</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div>
  </noscript>
</body>
</html>
